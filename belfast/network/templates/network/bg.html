{% extends 'page_base.html' %}
{% load static %}

{% block page-subtitle %} | Network Graph{% endblock %}

{% block head-extras %}
  {{ block.super }}
 <link href="{% static 'js/jquery-ui/css/ui-lightness/jquery-ui-1.10.3.custom.min.css' %}" rel="stylesheet" media="screen"/>
  <script type="text/javascript" src="{% static 'js/jquery-ui/js/jquery-ui-1.10.3.custom.min.js' %}"></script>
{% endblock %}

{% block page-content %}


<p>Force-directed network graph of people connected to the Belfast Group.
  Notes are colored by type.  Mouse over a label to see the text more clearly.</p>

  {# TODO: explanatory text; different by mode #}
  {# if groupsheets mode, explain connection weight/inferrences #}
{% if mode = 'groupsheet-model' %}
<p>This graph was generated based on the data of the group sheets themselves:
  treating the two periods of the group as two separate entities, and inferring
  connections between the authors and owners of group sheets and the period of
  the group that a particular document is associated with.  The weight of the
  connection is based on the number of groupsheets owned or authors, and co-authors
  and co-owners of a particular groupsheet are linked because presumably they
  attended the group together.</p>
{% endif %}

{% include 'network/snippets/graph_with_controls.html' %}


  <script src="{% static 'js/d3.min.js' %}" charset="utf-8"></script>
  <link type="text/css" href="{% static 'css/d3.force.css' %}" rel="stylesheet" media="screen"/>
   <script type="text/javascript" src="{% static 'js/d3.force.js' %}"></script>
   <script type="text/javascript">
     ForceGraphControls({
      target: '#graph-controls',
      graph_options: {
        target: "#network-graph",
        url: "{% url js_view %}",
        width: 650,
        height: 450,
        highlight: ['{{ bg_uri }}', 'Belfast Group, 1966-1972', 'Belfast Group, 1963-1966'],
        labels: true,
        node_info_url: "{% url 'network:node-info' %}"
      }
    });
   </script>
{% endblock %}